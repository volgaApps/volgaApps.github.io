<!DOCTYPE html>

<html>

<head>

<title>Web Audio API - iPad Test</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<script>
    var context;
    var soundBuffer;

    window.addEventListener('load', init, false);
    function init() {
        try {
            context = new AudioContext();
        } catch(e) {
            alert('Web Audio API is not supported in this browser');
        }
    }

    function loadSound(url) {
        var request = new XMLHttpRequest();
        request.open('GET', url, true);
        request.responseType = 'arraybuffer';

        request.onload = function() {
            context.decodeAudioData(request.response, function(buffer) {
                soundBuffer = buffer;
            }, onError);
        }
        request.send();
    }

    function playSound(buffer) {
        var source = context.createBufferSource();
        source.buffer = buffer;
        source.connect(context.destination);
        source.noteOn(0);
    }
</script>

</head>

<body>
<h1>Web Audio API Test</h1>

<script>

    var el = document;
    document.addEventListener("touchstart", handleStart);
    document.addEventListener('click', clickHandler);
    // el.addEventListener("touchend", handleEnd, false);
    // el.addEventListener("touchcancel", handleCancel, false);
    // el.addEventListener("touchmove", handleMove, false);


  function handleStart() {
    console.log('handleStart');
    }

    var n = 0;
    function clickHandler() {
        n++;
        console.log("Click! " + n);
        playSound(soundBuffer);
    }
</script>
</body>

</html>